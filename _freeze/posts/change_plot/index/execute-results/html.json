{
  "hash": "c42191e273711525e9dafa4e1af7f064",
  "result": {
    "markdown": "---\ntitle: \"Dumbbell plot: visualizar cambio en ggplot2\"\ndescription: |\n  Una manera de comparar los cambios en una figura.\ncategories: [data science, ggalt, dumbbell plot]\nauthor:\n  - name: Franklin Santos\n    url: https://franklinsantosm.com\n    affiliation: AgriTech Bolivia\n    orcid: 0000-0002-7509-2910\n    email: franklin25santos@gmail.com\ndate: \"2023-07-20\"\nimage: change.png\ncitation: true\neditor_options: \n  chunk_output_type: console\n---\n\n```{=html}\n<style>\nbody {\ntext-align: justify}\n</style>\n```\n\n\n## Introducción\n\nEl gráfico de mancuernas es una visualización que muestra el cambio entre dos puntos de nuestros datos. Su nombre se debe a la forma de la mancuerna. Es una gran manera de mostrar los datos cambiantes entre dos puntos (piensa en el inicio y el final). Aquí podemos ver la mejora en el ahorro de combustible de los vehículos a lo largo del tiempo (entre 1999 y 2008). La mancuerna muestra el punto inicial (MPG en 1999) y el punto final (MPG en 2008).\n\n## Cargar librerias y datos\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidyquant)\nlibrary(ggalt)\n\n# Data\nmpg\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 234 × 11\n   manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class\n   <chr>        <chr>      <dbl> <int> <int> <chr> <chr> <int> <int> <chr> <chr>\n 1 audi         a4           1.8  1999     4 auto… f        18    29 p     comp…\n 2 audi         a4           1.8  1999     4 manu… f        21    29 p     comp…\n 3 audi         a4           2    2008     4 manu… f        20    31 p     comp…\n 4 audi         a4           2    2008     4 auto… f        21    30 p     comp…\n 5 audi         a4           2.8  1999     6 auto… f        16    26 p     comp…\n 6 audi         a4           2.8  1999     6 manu… f        18    26 p     comp…\n 7 audi         a4           3.1  2008     6 auto… f        18    27 p     comp…\n 8 audi         a4 quattro   1.8  1999     4 manu… 4        18    26 p     comp…\n 9 audi         a4 quattro   1.8  1999     4 auto… 4        16    25 p     comp…\n10 audi         a4 quattro   2    2008     4 manu… 4        20    28 p     comp…\n# ℹ 224 more rows\n```\n:::\n:::\n\n\n## Paso 1: Preparacion de datos\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmpg_by_year_tbl = mpg %>%\n  select(hwy, year, model, class)%>%\n  pivot_wider(\n    names_from = year,\n    values_from = hwy,\n    id_cols = c(class, model),\n    values_fn = function(x) mean(x, na.rm = TRUE),\n    names_prefix = \"year_\"\n  )%>%\n  mutate(model = fct_reorder(model, year_2008))%>%\n  drop_na()\n```\n:::\n\n\n## Paso 2: Dumbbell plot base\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# basic plot with ggalt\ng1 = mpg_by_year_tbl%>%\n  ggplot(aes(x = year_1999, xend = year_2008,\n             y = model, group = model))+\n  geom_dumbbell(\n    colour=\"#a3c4dc\",\n    colour_xend = \"#0e668b\",\n    size=2.5,\n    dot_guide = TRUE,\n    dot_guide_size = 0.19,\n    dot_guide_colour = \"grey60\"\n  )\n\ng1\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n## Paso 3: Configurar con `ggplot`\n\n\n::: {.cell}\n\n```{.r .cell-code}\ng2 = g1 +\n  labs(\n    title = \"Cambio de vehiculos entre 1999 y 2008\",\n    x=\"Fuel Economy (MPG)\", y=\"Vehicle Model\"\n)+\n  theme_tq()+\n  theme(\n    panel.grid.minor = element_blank(),\n    panel.grid.major.y = element_blank(),\n    panel.grid.major.x = element_line(),\n    axis.ticks = element_blank(),\n    panel.border = element_blank()\n  )\n\ng2\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}